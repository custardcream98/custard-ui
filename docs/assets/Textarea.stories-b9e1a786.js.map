{"version":3,"file":"Textarea.stories-b9e1a786.js","sources":["../../src/hooks/useForwardRef.ts","../../src/components/Textarea/Textarea.tsx","../../src/stories/components/Textarea/Textarea.stories.mdx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\nconst useForwardRef = <T>(\n  ref: React.ForwardedRef<T>,\n  initialValue: any = null\n) => {\n  const targetRef = useRef<T>(initialValue);\n\n  useEffect(() => {\n    if (!ref) return;\n\n    if (typeof ref === \"function\") {\n      ref(targetRef.current);\n    } else {\n      ref.current = targetRef.current;\n    }\n  }, [ref]);\n\n  return targetRef;\n};\n\nexport default useForwardRef;\n","import {\n  ComponentPropsWithoutRef,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport styled from \"@emotion/styled\";\n\nimport { useForwardRef } from \"../../hooks\";\nimport type { ComponentPropsWithoutRefAndChildren } from \"../../@types\";\nimport { css } from \"@emotion/react\";\nimport { theme } from \"../../styles\";\n\nconst MIN_HEIGHT = 200;\n\ntype TextareaProps =\n  ComponentPropsWithoutRefAndChildren<\"textarea\"> & {\n    minHeight?: number;\n  };\n\ntype StyledTextareaProps = {\n  textareaHeight: number;\n};\n\ntype StyledTextareaHandleProps = {\n  \"aria-label\": \"입력란 크기 조절 핸들\";\n};\n\ntype StyledTextareaWrapperProps = {\n  isFocused: boolean;\n};\n\nconst Textarea = forwardRef<\n  HTMLTextAreaElement,\n  TextareaProps\n>(\n  (\n    { minHeight = MIN_HEIGHT, className, ...props },\n    ref\n  ) => {\n    const textareaRef =\n      useForwardRef<HTMLTextAreaElement>(ref);\n    const handleRef = useRef<HTMLButtonElement>(null);\n\n    const [textareaHeight, setTextareaHeight] =\n      useState<number>(minHeight);\n    const [isResizing, setIsResizing] =\n      useState<boolean>(false);\n    const [isFocused, setIsFocused] =\n      useState<boolean>(false);\n\n    const handleStartResize = useCallback(() => {\n      setIsResizing(true);\n    }, []);\n\n    const handleEndResize = useCallback(() => {\n      setIsResizing(false);\n    }, []);\n\n    const handleFocusIn = useCallback(() => {\n      setIsFocused(true);\n    }, []);\n\n    const handleFocusOut = useCallback(() => {\n      setIsFocused(false);\n    }, []);\n\n    const handleResizeWithTextareaElement = useCallback(\n      (textareaElement: HTMLTextAreaElement) =>\n        (event: MouseEvent | TouchEvent) => {\n          if (!isResizing) {\n            return;\n          }\n\n          const pageY =\n            event instanceof MouseEvent\n              ? event.pageY\n              : event.touches[0].pageY;\n\n          const newHeight =\n            pageY - textareaElement.offsetTop - minHeight;\n          setTextareaHeight(Math.max(newHeight, minHeight));\n          event.preventDefault();\n        },\n      [textareaRef, isResizing, minHeight]\n    );\n\n    useEffect(() => {\n      const textareaElement = textareaRef.current;\n\n      if (!textareaElement) {\n        return;\n      }\n\n      const handleResize =\n        handleResizeWithTextareaElement(textareaElement);\n\n      window.addEventListener(\"mouseup\", handleEndResize);\n      window.addEventListener(\"touchend\", handleEndResize);\n      window.addEventListener(\"mousemove\", handleResize);\n      window.addEventListener(\"touchmove\", handleResize, {\n        passive: false,\n      });\n      return () => {\n        window.removeEventListener(\n          \"mouseup\",\n          handleEndResize\n        );\n        window.removeEventListener(\n          \"touchend\",\n          handleEndResize\n        );\n        window.removeEventListener(\n          \"mousemove\",\n          handleResize\n        );\n        window.removeEventListener(\n          \"touchmove\",\n          handleResize\n        );\n      };\n    }, [\n      handleEndResize,\n      handleResizeWithTextareaElement,\n      textareaRef,\n    ]);\n\n    useEffect(() => {\n      const textareaElement = textareaRef.current;\n\n      if (!textareaElement) {\n        return;\n      }\n\n      textareaElement.addEventListener(\n        \"focusin\",\n        handleFocusIn\n      );\n      textareaElement.addEventListener(\n        \"focusout\",\n        handleFocusOut\n      );\n\n      return () => {\n        textareaElement.removeEventListener(\n          \"focusin\",\n          handleFocusIn\n        );\n        textareaElement.removeEventListener(\n          \"focusout\",\n          handleFocusOut\n        );\n      };\n    }, [textareaRef, handleFocusIn, handleFocusOut]);\n\n    return (\n      <StyledTextareaWrapper\n        className={className}\n        isFocused={isFocused}\n      >\n        <StyledTextarea\n          ref={textareaRef}\n          textareaHeight={textareaHeight}\n          {...props}\n        />\n        <StyledTextareaHandle\n          ref={handleRef}\n          onMouseDown={handleStartResize}\n          onTouchStart={handleStartResize}\n          aria-label=\"입력란 크기 조절 핸들\"\n        ></StyledTextareaHandle>\n      </StyledTextareaWrapper>\n    );\n  }\n);\n\nconst StyledTextareaWrapper = styled.div<StyledTextareaWrapperProps>`\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #ccc;\n\n  overflow: hidden;\n\n  ${({ isFocused }) =>\n    isFocused &&\n    css`\n      outline: 2px solid ${theme.colors.primary};\n      outline-offset: 2px;\n    `}\n`;\nconst StyledTextareaHandle = styled.button<StyledTextareaHandleProps>`\n  display: block;\n\n  width: 100%;\n  height: 10px;\n  background-color: #f0f0f0;\n\n  cursor: ns-resize;\n\n  ::before {\n    content: \"\";\n    width: 30px;\n    height: 3px;\n    border-radius: 9999px;\n    background-color: #ccc;\n    display: block;\n    margin: 0 auto;\n  }\n`;\nconst StyledTextarea = styled.textarea<StyledTextareaProps>`\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  height: 100%;\n  border: none;\n\n  padding: 0.6rem;\n\n  font-size: 1rem;\n  resize: none;\n\n  height: ${({ textareaHeight }) => textareaHeight}px;\n\n  :focus {\n    outline: none;\n  }\n\n  ::placeholder {\n    color: #ccc;\n    font-weight: 300;\n  }\n`;\n\nexport default Textarea;\n","import { Meta, Canvas, Story } from \"@storybook/addon-docs\";\nimport { Textarea } from \"../../../\";\n\n<Meta title=\"Components/Textarea\" component={Textarea} />\n\n# Textarea\n\n`Textarea` 컴포넌트는 수직으로 사이즈를 조절할 수 있으며, `minHeight` prop을 통해 최소 높이를 지정할 수 있습니다.\n\n<Canvas>\n  <Story name=\"Textarea\">\n    <Textarea placeholder=\"Type anything...\" />\n  </Story>\n</Canvas>\n\n모바일 환경에서도 잘 지원됩니다.\n"],"names":["useForwardRef","ref","initialValue","targetRef","useRef","useEffect","useForwardRef$1","MIN_HEIGHT","Textarea","forwardRef","minHeight","className","props","textareaRef","handleRef","textareaHeight","setTextareaHeight","useState","isResizing","setIsResizing","isFocused","setIsFocused","handleStartResize","useCallback","handleEndResize","handleFocusIn","handleFocusOut","handleResizeWithTextareaElement","textareaElement","event","newHeight","handleResize","jsxs","StyledTextareaWrapper","jsx","StyledTextarea","StyledTextareaHandle","styled","css","theme","Textarea$1","MDXContent","MDXLayout","_provideComponents","_jsx","_createMdxContent","_components","_jsxs","_Fragment","Meta","Canvas","Story","textarea","componentMeta","__namedExportsOrder"],"mappings":"msBAEA,MAAMA,EAAgB,CACpBC,EACAC,EAAoB,OACjB,CACG,MAAAC,EAAYC,SAAUF,CAAY,EAExCG,OAAAA,EAAAA,UAAU,IAAM,CACTJ,IAED,OAAOA,GAAQ,WACjBA,EAAIE,EAAU,OAAO,EAErBF,EAAI,QAAUE,EAAU,QAC1B,EACC,CAACF,CAAG,CAAC,EAEDE,CACT,EAEAG,EAAeN,ECNfO,EAAA,IAmBAC,EAAAC,EAAA,WAAiB,CAAA,CAAA,UAAAC,EAAAH,EAAA,UAAAI,EAAA,GAAAC,CAAA,EAAAX,IAAA,CAQb,MAAAY,EAAAb,EAAAC,CAAA,EAEAa,EAAAV,SAAA,IAAA,EAEA,CAAAW,EAAAC,CAAA,EAAAC,EAAA,SAAAP,CAAA,EAEA,CAAAQ,EAAAC,CAAA,EAAAF,EAAA,SAAA,EAAA,EAEA,CAAAG,EAAAC,CAAA,EAAAJ,EAAA,SAAA,EAAA,EAGAK,EAAAC,EAAAA,YAAA,IAAA,CACEJ,EAAA,EAAA,CAAkB,EAAA,CAAA,CAAA,EAGpBK,EAAAD,EAAAA,YAAA,IAAA,CACEJ,EAAA,EAAA,CAAmB,EAAA,CAAA,CAAA,EAGrBM,EAAAF,EAAAA,YAAA,IAAA,CACEF,EAAA,EAAA,CAAiB,EAAA,CAAA,CAAA,EAGnBK,EAAAH,EAAAA,YAAA,IAAA,CACEF,EAAA,EAAA,CAAkB,EAAA,CAAA,CAAA,EAGpBM,EAAAJ,EAAA,YAAwCK,GAAAC,GAAA,CAGlC,GAAA,CAAAX,EACE,OAQF,MAAAY,GALAD,aAAA,WAAAA,EAAA,MAAAA,EAAA,QAAA,CAAA,EAAA,OAKAD,EAAA,UAAAlB,EAEAM,EAAA,KAAA,IAAAc,EAAApB,CAAA,CAAA,EACAmB,EAAA,eAAA,CAAqB,EACvB,CAAAhB,EAAAK,EAAAR,CAAA,CACiC,EAGrCL,OAAAA,EAAAA,UAAA,IAAA,CACE,MAAAuB,EAAAf,EAAA,QAEA,GAAA,CAAAe,EACE,OAGF,MAAAG,EAAAJ,EAAAC,CAAA,EAGA,cAAA,iBAAA,UAAAJ,CAAA,EACA,OAAA,iBAAA,WAAAA,CAAA,EACA,OAAA,iBAAA,YAAAO,CAAA,EACA,OAAA,iBAAA,YAAAA,EAAA,CAAmD,QAAA,EACxC,CAAA,EAEX,IAAA,CACE,OAAA,oBAAO,UACLP,CACA,EAEF,OAAA,oBAAO,WACLA,CACA,EAEF,OAAA,oBAAO,YACLO,CACA,EAEF,OAAA,oBAAO,YACLA,CACA,CACF,CACF,EAAA,CACCP,EACDG,EACAd,CACA,CAAA,EAGFR,EAAAA,UAAA,IAAA,CACE,MAAAuB,EAAAf,EAAA,QAEA,GAAAe,EAIA,OAAAA,EAAA,iBAAgB,UACdH,CACA,EAEFG,EAAA,iBAAgB,WACdF,CACA,EAGF,IAAA,CACEE,EAAA,oBAAgB,UACdH,CACA,EAEFG,EAAA,oBAAgB,WACdF,CACA,CACF,CACF,EAAA,CAAAb,EAAAY,EAAAC,CAAA,CAAA,EAGFM,EACEC,EAAC,CAAA,UAAAtB,EACC,UAAAS,EACA,SAAA,CAEAc,EAAAC,EAAC,CAAA,IAAAtB,EACM,eAAAE,EACL,GAAAH,CACI,CAAA,EACNsB,EACAE,EAAC,CAAA,IAAAtB,EACM,YAAAQ,EACQ,aAAAA,EACC,aAAA,cACH,CAAA,CACZ,CAAA,CAAA,CACH,CAGN,EAEAW,EAAAI,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAqC,CAAA,CAAA,UAAAjB,KAAAA,GAAAkB;AAAA,2BASjCC,EAAA,OAAA;AAAA;AAAA;AAAA,EAKJH,EAAAC,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAmBAF,EAAAE,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA8B,CAAA,CAAA,eAAAtB,CAAA,IAAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwB9ByB,EAAAhC,6MCpOA,SAASiC,EAAW7B,EAAQ,GAAI,CAC9B,KAAM,CACJ,QAAS8B,CACb,EAAM,OAAO,OAAO,CAAE,EAAEC,EAAkB,EAAI/B,EAAM,UAAU,EAC5D,OAAO8B,EAAyBE,EAAKF,EAAW,CAAE,GAAG9B,EACnD,SAAuBgC,EAAKC,EAAmB,EAAE,CACrD,CAAG,EAAIA,EAAiB,EAEtB,SAASA,GAAoB,CAC3B,MAAMC,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,EAAG,IACH,KAAM,MACP,EAAEH,EAAoB,EAAE/B,EAAM,UAAU,EAEzC,OAAoBmC,EAAMC,EAAW,CACnC,SAAU,CAAcJ,EAAKK,EAAM,CACjC,MAAO,sBACP,UAAWzC,CACZ,CAAA,EAAG;AAAA,EAAmBoC,EAAKE,EAAY,GAAI,CAC1C,SAAU,UACX,CAAA,EAAG;AAAA,EAAmBC,EAAMD,EAAY,EAAG,CAC1C,SAAU,CAAcF,EAAKE,EAAY,KAAM,CAC7C,SAAU,UACX,CAAA,EAAG,+BAA6CF,EAAKE,EAAY,KAAM,CACtE,SAAU,WACX,CAAA,EAAG,8BAA8B,CAC1C,CAAO,EAAG;AAAA,EAAmBF,EAAKM,EAAQ,CAClC,SAAuBN,EAAKO,EAAO,CACjC,KAAM,WACN,SAAuBP,EAAKpC,EAAU,CACpC,YAAa,kBACzB,CAAW,CACX,CAAS,CACF,CAAA,EAAG;AAAA,EAAmBoC,EAAKE,EAAY,EAAG,CACzC,SAAU,oBAClB,CAAO,CAAC,CACR,CAAK,CACF,CACH,CAIY,MAACM,EAAW,IAAmBR,EAAKpC,EAAU,CACxD,YAAa,kBACf,CAAC,EACD4C,EAAS,UAAY,WACrBA,EAAS,WAAa,CACpB,YAAa,CACX,OAAQ,6CACT,CACH,EACK,MAACC,EAAgB,CACpB,MAAO,sBACP,UAAW7C,EACX,KAAM,CAAC,aAAa,EACpB,eAAgB,CAAC,UAAU,CAC7B,EACA6C,EAAc,WAAaA,EAAc,YAAc,GACvDA,EAAc,WAAW,KAAO,CAAE,GAAIA,EAAc,WAAW,MAAQ,GACrE,KAAMZ,CACR,EAC4B,MAAAa,GAAA,CAAA,UAAA"}